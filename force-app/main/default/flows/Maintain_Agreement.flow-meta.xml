<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Send_Notification</name>
        <label>Send Notification</label>
        <locationX>50</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path15</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>You are not authorized to maintain service agreements.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0</name>
        <label>Send Notification</label>
        <locationX>578</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path16</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>This Opportunity has already been processed. You can not processed it again</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0_0</name>
        <label>Send Notification</label>
        <locationX>1106</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path17</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>You must have a Bill-to Account to process an Opportunity</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0_0_0</name>
        <label>Send Notification</label>
        <locationX>1634</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path18</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>Opportunity must be closed won to process</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0_0_0_0</name>
        <label>Send Notification</label>
        <locationX>2162</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path19</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>You can not process a new Opportunity with a current Service Agreement. You must change the order type to modify a current Service Agreement, or if it is a new Opportunity, you can not reference a current Service Agreement.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0_0_0_0_0</name>
        <label>Send Notification</label>
        <locationX>5594</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path20</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>Information is missing to process this Opportunity</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>Send_Notification_0_0_0_0_0_0</name>
        <label>Send Notification</label>
        <locationX>6122</locationX>
        <locationY>1079</locationY>
        <actionName>customNotificationAction</actionName>
        <actionType>customNotificationAction</actionType>
        <faultConnector>
            <targetReference>Fault_Path21</targetReference>
        </faultConnector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>customNotifTypeId</name>
            <value>
                <elementReference>Get_Notification_0.Id</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>body</name>
            <value>
                <stringValue>You have not met the criteria to create or update a Service Agreement.</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>title</name>
            <value>
                <stringValue>Notification</stringValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>recipientIds</name>
            <value>
                <elementReference>varCurrentUsers</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>targetId</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>customNotificationAction</nameSegment>
    </actionCalls>
    <apiVersion>55.0</apiVersion>
    <assignments>
        <name>Add_Service_Products_to_Collection</name>
        <label>Add Service Products to Collection</label>
        <locationX>2866</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>varServiceAgreementProductCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varServiceAgreementProduct</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Opp_Line_Items</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_Service_Agrmt_Product_Collection</name>
        <label>Add to Service Agrmt Product Collection</label>
        <locationX>4890</locationX>
        <locationY>1511</locationY>
        <assignmentItems>
            <assignToReference>varServiceAgreementProductCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varServiceAgreementProduct</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Current_Opportunity_Products</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_Service_Products_to_Update</name>
        <label>Add to Service Products to Update</label>
        <locationX>5594</locationX>
        <locationY>1727</locationY>
        <assignmentItems>
            <assignToReference>varServiceProductsToUpdateCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varServiceProductsToUpdateObject</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Current_Service_Product_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Service_Agreement_Product_Loop_Variables</name>
        <label>Assign Service Agreement Product Loop Variables</label>
        <locationX>5594</locationX>
        <locationY>1619</locationY>
        <assignmentItems>
            <assignToReference>varServiceProductsToUpdateObject.Last_Opportunity_Product_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceProductsToUpdateObject.Billing_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Order_Type__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceProductsToUpdateObject.Pending_Expiration__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceProductsToUpdateObject.Id</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Service_Product_Collection.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_Service_Products_to_Update</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Service_Agrmt_Product_Loop_Variables</name>
        <label>Assign Service Agrmt Product Loop Variables</label>
        <locationX>4890</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Opportunity_Line_Item_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.Opportunity_Line_Item_ID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Price_Per_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Effective_Date__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.First_Bill_Date__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.CallRevu_Contract__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.Service_Agreement__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Billing_Agreement__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Current_Billing_Agreement.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Included_Units__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Current_Opportunity_Products.Minutes__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_Service_Agrmt_Product_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_Current_User_Variable</name>
        <label>Assign to Current User Variable</label>
        <locationX>3086</locationX>
        <locationY>647</locationY>
        <assignmentItems>
            <assignToReference>varCurrentUsers</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>varCurrentUser</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Get_Notification_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Values_to_Service_Line_Item</name>
        <label>Assign Values to Service Line Item</label>
        <locationX>2866</locationX>
        <locationY>1403</locationY>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Opportunity_Line_Item_ID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.Opportunity_Line_Item_ID__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Quantity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.Quantity</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Product__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.Product2Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.CallRevu_Contract__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varServiceAgreementId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Price_Per_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.UnitPrice</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Name</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Billing_Type__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>New</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Billing_Agreement__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>varBillingAgreementId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.Included_Units__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.Minutes__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varServiceAgreementProduct.PriceBookEntryID__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Opp_Line_Items.PricebookEntryId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_Service_Products_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>setAddendumAlerttoTrue</name>
        <label>setAddendumAlerttoTrue</label>
        <locationX>3042</locationX>
        <locationY>2927</locationY>
        <assignmentItems>
            <assignToReference>varAddendumAlert</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>varBillingCaseSubject</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Update NS Order</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Create_Enrollment_Case_Addendum</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Case_Workflow_Types</name>
        <label>Case Workflow Types</label>
        <locationX>3086</locationX>
        <locationY>2819</locationY>
        <defaultConnector>
            <targetReference>is_Billing_Bypass_True</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Workflow</defaultConnectorLabel>
        <rules>
            <name>Send_To_Enrollment</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Agreement_Workflow__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Send to Enrollment</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Enrollment_Case</targetReference>
            </connector>
            <label>Send To Enrollment</label>
        </rules>
        <rules>
            <name>Addendum_Workflow</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Agreement_Workflow__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Addendum Workflow</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>setAddendumAlerttoTrue</targetReference>
            </connector>
            <label>Addendum Workflow</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Match_to_Current_Product</name>
        <label>Check Match to Current Product</label>
        <locationX>5726</locationX>
        <locationY>1511</locationY>
        <defaultConnector>
            <targetReference>Loop_Current_Service_Product_Collection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No Match</defaultConnectorLabel>
        <rules>
            <name>Match_to_Current_Product</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Current_Service_Product_Collection.Product__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>Loop_Current_Opportunity_Products.Product2Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Service_Agreement_Product_Loop_Variables</targetReference>
            </connector>
            <label>Match to Current Product</label>
        </rules>
    </decisions>
    <decisions>
        <name>is_Billing_Bypass_True</name>
        <label>is Billing Bypass True?</label>
        <locationX>3394</locationX>
        <locationY>2927</locationY>
        <defaultConnector>
            <targetReference>Create_No_Workflow_Accounting_Case</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Bypass_is_TRUE_no_accounting_Case</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>$Record__Prior.Billing_Case_Bypass__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Accounting_Case_Manual_Create__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Opportunity_Processed</targetReference>
            </connector>
            <label>Bypass is TRUE (no accounting Case)</label>
        </rules>
    </decisions>
    <decisions>
        <name>New_or_Changed_Opp</name>
        <label>New or Changed Opp</label>
        <locationX>3086</locationX>
        <locationY>971</locationY>
        <defaultConnector>
            <targetReference>Send_Notification_0_0_0_0_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Not_Authorized_To_Maintain_Agreements</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$User.Service_Agreements_Authorized_To_Create__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification</targetReference>
            </connector>
            <label>Not Authorized To Maintain Agreements</label>
        </rules>
        <rules>
            <name>Already_Processed</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Date_Processed__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification_0</targetReference>
            </connector>
            <label>Already Processed</label>
        </rules>
        <rules>
            <name>Missing_Bill_to_Location</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Bill_To_Account__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification_0_0</targetReference>
            </connector>
            <label>Missing Bill-to Location</label>
        </rules>
        <rules>
            <name>Not_Closed_Won</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed Won</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.StageName</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Closed-Completed</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification_0_0_0</targetReference>
            </connector>
            <label>Not Closed Won</label>
        </rules>
        <rules>
            <name>New_With_Service_Agreement</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Order_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Service_Agreement__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification_0_0_0_0</targetReference>
            </connector>
            <label>New With Service Agreement</label>
        </rules>
        <rules>
            <name>New_Opportunity</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Order_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>New</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Service_Agreement__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Bill_To_Account__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$User.Service_Agreements_Authorized_To_Create__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>new</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Create_Service_Agreement</targetReference>
            </connector>
            <label>New Opportunity</label>
        </rules>
        <rules>
            <name>Update_Opportunity</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Order_Type__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>New</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Service_Agreement__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Bill_To_Account__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$User.Service_Agreements_Authorized_To_Create__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Change</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Current_Service_Agreement_Products</targetReference>
            </connector>
            <label>Update Opportunity</label>
        </rules>
        <rules>
            <name>Check_If_All_Information_is_Available</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>varLengthMissingInfo</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Send_Notification_0_0_0_0_0</targetReference>
            </connector>
            <label>Processing Information Not Complete</label>
        </rules>
    </decisions>
    <decisions>
        <name>Product_Loop_Quantity</name>
        <label>Product Loop Quantity</label>
        <locationX>5198</locationX>
        <locationY>1295</locationY>
        <defaultConnector>
            <targetReference>Loop_Current_Service_Product_Collection</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Less Than 0</defaultConnectorLabel>
        <rules>
            <name>Greater_Or_Equal_to_1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Current_Opportunity_Products.Quantity</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Service_Agrmt_Product_Loop_Variables</targetReference>
            </connector>
            <label>Greater Or Equal to 1</label>
        </rules>
    </decisions>
    <description>10/10/24 - adjusted effective date + Addendum changes + removal of accounting case creation + Enrollment/Launch changes</description>
    <environments>Default</environments>
    <formulas>
        <name>EnrollmentCaseOwner</name>
        <dataType>String</dataType>
        <expression>IF(!ISNULL({!$Record.Anticipated_Implementation_Lead__c}) &amp;&amp; !ISBLANK({!$Record.Anticipated_Implementation_Lead__c}),
{!$Record.Anticipated_Implementation_Lead__c},
{!Get_Flow_Configuration_Settings.Enrollment_OwnerId__c})</expression>
    </formulas>
    <formulas>
        <name>EnrollmentSubject</name>
        <dataType>String</dataType>
        <expression>&quot;Account Setup - &quot;  &amp; {!$Record.Account.Name}</expression>
    </formulas>
    <formulas>
        <name>form_AdjustedTier2Status</name>
        <dataType>String</dataType>
        <expression>IF({!$Record.RecordType.Name} = &apos;Tier2&apos;,&apos;Tier 2&apos;,null)</expression>
    </formulas>
    <formulas>
        <description>Sets the billing case subject for the enrollment case created with consideration to the Billing Case Bypass field.</description>
        <name>formula_BillingCaseSubject</name>
        <dataType>String</dataType>
        <expression>IF({!$Record.Billing_Case_Bypass__c}, null, {!varBillingCaseSubject})</expression>
    </formulas>
    <formulas>
        <name>varCurrentUser</name>
        <dataType>String</dataType>
        <expression>{!$User.Id}</expression>
    </formulas>
    <formulas>
        <name>varEffectiveDate</name>
        <dataType>Date</dataType>
        <expression>Date(Year(Today()),Month(Today()),Day(Today()))</expression>
    </formulas>
    <formulas>
        <name>varLengthMissingInfo</name>
        <dataType>Number</dataType>
        <expression>len({!$Record.Information_Required_For_Processing__c})</expression>
        <scale>0</scale>
    </formulas>
    <interviewLabel>Maintain Agreement {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Maintain Agreement</label>
    <loops>
        <name>Loop_Current_Opportunity_Products</name>
        <label>Loop Current Opportunity Products</label>
        <locationX>4802</locationX>
        <locationY>1187</locationY>
        <collectionReference>Look_Up_Opportunity_Line_Items</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Product_Loop_Quantity</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_Service_Agreement_Products</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Current_Service_Product_Collection</name>
        <label>Loop Current Service Product Collection</label>
        <locationX>5506</locationX>
        <locationY>1403</locationY>
        <collectionReference>Get_Current_Service_Agreement_Products</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Match_to_Current_Product</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Loop_Current_Opportunity_Products</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Loop_Opp_Line_Items</name>
        <label>Loop Opp Line Items</label>
        <locationX>2778</locationX>
        <locationY>1295</locationY>
        <collectionReference>Look_Up_Opportunity_Line_Items</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Values_to_Service_Line_Item</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Create_New_Service_Agreement_Products</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Bill_To_Billing_Agreement</name>
        <label>Create Bill To Billing Agreement</label>
        <locationX>2778</locationX>
        <locationY>1187</locationY>
        <assignRecordIdToReference>varBillingAgreementId</assignRecordIdToReference>
        <connector>
            <targetReference>Loop_Opp_Line_Items</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path2</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Bill_to_Account__c</field>
            <value>
                <elementReference>$Record.Bill_To_Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Effective_Date__c</field>
            <value>
                <elementReference>varEffectiveDate</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Service_Agreement__c</field>
            <value>
                <elementReference>varServiceAgreementId</elementReference>
            </value>
        </inputAssignments>
        <object>Billing_Agreement__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Enrollment_Case</name>
        <label>Create Enrollment Case</label>
        <locationX>2778</locationX>
        <locationY>2927</locationY>
        <assignRecordIdToReference>varEnrollmentCaseId</assignRecordIdToReference>
        <connector>
            <targetReference>Update_Service_Agreement</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Actionable_Items__c</field>
            <value>
                <elementReference>$Record.Actionable_Items__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Agreement_Type__c</field>
            <value>
                <stringValue>Active Purchase</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Billing_Case_Name__c</field>
            <value>
                <elementReference>formula_BillingCaseSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Case_Subtype__c</field>
            <value>
                <stringValue>New Client Enrollment</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Discovery_Notes__c</field>
            <value>
                <elementReference>$Record.Discovery_Notes__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Implementation_Expectations__c</field>
            <value>
                <elementReference>$Record.Implementation_Expectations__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>EnrollmentCaseOwner</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Flow_Configuration_Settings.Case_Enrollment_RT_Id__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Service_Agreement__c</field>
            <value>
                <elementReference>$Record.Service_Agreement_ID__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Setup_Type__c</field>
            <value>
                <stringValue>New Setup</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>1 - Agreement Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>EnrollmentSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Enrollment</stringValue>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Enrollment_Case_Addendum</name>
        <label>Create Enrollment Case (Addendum)</label>
        <locationX>3042</locationX>
        <locationY>3035</locationY>
        <assignRecordIdToReference>varEnrollmentCaseId</assignRecordIdToReference>
        <connector>
            <targetReference>Update_Service_Agreement_Addendum</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Actionable_Items__c</field>
            <value>
                <elementReference>$Record.Actionable_Items__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Addendum_Alert__c</field>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Agreement_Type__c</field>
            <value>
                <stringValue>Active Purchase</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Billing_Case_Name__c</field>
            <value>
                <elementReference>formula_BillingCaseSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Case_Subtype__c</field>
            <value>
                <stringValue>New Client Enrollment</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Discovery_Notes__c</field>
            <value>
                <elementReference>$Record.Discovery_Notes__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Implementation_Expectations__c</field>
            <value>
                <elementReference>$Record.Implementation_Expectations__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>EnrollmentCaseOwner</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>RecordTypeId</field>
            <value>
                <elementReference>Get_Flow_Configuration_Settings.Case_Enrollment_RT_Id__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Service_Agreement__c</field>
            <value>
                <elementReference>$Record.Service_Agreement_ID__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Setup_Type__c</field>
            <value>
                <stringValue>New Setup</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>1 - Agreement Completed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <elementReference>EnrollmentSubject</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Type</field>
            <value>
                <stringValue>Enrollment</stringValue>
            </value>
        </inputAssignments>
        <object>Case</object>
    </recordCreates>
    <recordCreates>
        <name>Create_New_Service_Agreement_Products</name>
        <label>Create New Service Agreement Products</label>
        <locationX>2778</locationX>
        <locationY>1703</locationY>
        <connector>
            <targetReference>Update_Opportunity_With_Service_Agreement</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path3</targetReference>
        </faultConnector>
        <inputReference>varServiceAgreementProductCollection</inputReference>
    </recordCreates>
    <recordCreates>
        <name>Create_Service_Agreement</name>
        <label>Create Service Agreement</label>
        <locationX>2778</locationX>
        <locationY>1079</locationY>
        <assignRecordIdToReference>varServiceAgreementId</assignRecordIdToReference>
        <connector>
            <targetReference>Create_Bill_To_Billing_Agreement</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path1</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Bill_To_Share_Fixed_Amount__c</field>
            <value>
                <elementReference>$Record.Bill_to_Share_Fixed_Amount__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Bill_To_Share_Fixed_Frequency__c</field>
            <value>
                <elementReference>$Record.Bill_to_Share_Fixed_Frequency__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Bill_to_Account__c</field>
            <value>
                <elementReference>$Record.Bill_To_Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Bill_to_Share_Account__c</field>
            <value>
                <elementReference>$Record.Bill_To_Share_Account__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Bill_to_Share_Percentage__c</field>
            <value>
                <elementReference>$Record.Bill_to_Share_Percentage__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Discovery_Notes__c</field>
            <value>
                <elementReference>$Record.Discovery_Notes__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Features_of_Interest__c</field>
            <value>
                <elementReference>$Record.Features_of_Interest__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Implementation_Expectations__c</field>
            <value>
                <elementReference>$Record.Implementation_Expectations__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Last_Opportunity_Change_Type__c</field>
            <value>
                <elementReference>$Record.Order_Type__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Last_Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Name</field>
            <value>
                <elementReference>$Record.Account.Name</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Originating_Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Price_Book__c</field>
            <value>
                <elementReference>$Record.Pricebook2Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Referral_Partner__c</field>
            <value>
                <elementReference>$Record.Referral_Partner__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Service_Location__c</field>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Tier_Status__c</field>
            <value>
                <elementReference>form_AdjustedTier2Status</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>What_are_the_Client_Objectives__c</field>
            <value>
                <elementReference>$Record.What_are_the_Client_Objectives__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>What_are_the__c</field>
            <value>
                <elementReference>$Record.What_are_the_Customer_Challenges__c</elementReference>
            </value>
        </inputAssignments>
        <object>Service_Agreement__c</object>
    </recordCreates>
    <recordCreates>
        <name>Create_Service_Agreement_Products</name>
        <label>Create Service Agreement Products</label>
        <locationX>4802</locationX>
        <locationY>2171</locationY>
        <connector>
            <targetReference>Update_Service_Products_to_Update</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path5</targetReference>
        </faultConnector>
        <inputReference>varServiceAgreementProductCollection</inputReference>
    </recordCreates>
    <recordLookups>
        <name>Get_Account_Information</name>
        <label>Get Account Information</label>
        <locationX>3086</locationX>
        <locationY>323</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Look_Up_Opportunity_Line_Items</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Account</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Current_Billing_Agreement</name>
        <label>Get Current Billing Agreement</label>
        <locationX>3086</locationX>
        <locationY>539</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Assign_to_Current_User_Variable</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Service_Agreement__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Service_Agreement__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Billing_Agreement__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Current_Service_Agreement_Products</name>
        <label>Get Current Service Agreement Products</label>
        <locationX>4802</locationX>
        <locationY>1079</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Loop_Current_Opportunity_Products</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>CallRevu_Contract__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Service_Agreement__c</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Service_Agreement_Products__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Flow_Configuration_Settings</name>
        <label>Get Flow Configuration Settings</label>
        <locationX>3086</locationX>
        <locationY>2711</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Case_Workflow_Types</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Flow_Settings</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Flow_Configuration_Settings__mdt</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Notification_0</name>
        <label>Get Notification</label>
        <locationX>3086</locationX>
        <locationY>755</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Update_Maintain_Agreements_field</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Custom_Message</stringValue>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>CustomNotificationType</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Look_Up_Opportunity_Line_Items</name>
        <label>Look Up Opportunity Line Items</label>
        <locationX>3086</locationX>
        <locationY>431</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Current_Billing_Agreement</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>OpportunityId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>OpportunityLineItem</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordUpdates>
        <name>Update_Maintain_Agreements_field</name>
        <label>Update Maintain Agreements field</label>
        <locationX>3086</locationX>
        <locationY>863</locationY>
        <connector>
            <targetReference>New_or_Changed_Opp</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path</targetReference>
        </faultConnector>
        <inputAssignments>
            <field>Maintain_Agreements__c</field>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_Processed</name>
        <label>Update Opportunity Processed</label>
        <locationX>3086</locationX>
        <locationY>3335</locationY>
        <faultConnector>
            <targetReference>Fault_Path14</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Date_Processed__c</field>
            <value>
                <elementReference>$Record.CloseDate</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Opportunity_With_Service_Agreement</name>
        <label>Update Opportunity With Service Agreement</label>
        <locationX>2778</locationX>
        <locationY>1811</locationY>
        <connector>
            <targetReference>Get_Flow_Configuration_Settings</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path4</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Service_Agreement__c</field>
            <value>
                <elementReference>varServiceAgreementId</elementReference>
            </value>
        </inputAssignments>
        <object>Opportunity</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Service_Agreement</name>
        <label>Update Service Agreement</label>
        <locationX>2778</locationX>
        <locationY>3035</locationY>
        <connector>
            <targetReference>Update_Opportunity_Processed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varServiceAgreementId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Enrollment_Case__c</field>
            <value>
                <elementReference>varEnrollmentCaseId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Last_Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Originating_Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Pooling_Minutes__c</field>
            <value>
                <elementReference>$Record.Pooling_Minutes__c</elementReference>
            </value>
        </inputAssignments>
        <object>Service_Agreement__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Service_Agreement_Addendum</name>
        <label>Update Service Agreement (Addendum)</label>
        <locationX>3042</locationX>
        <locationY>3143</locationY>
        <connector>
            <targetReference>Update_Opportunity_Processed</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>varServiceAgreementId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Current_Case__c</field>
            <value>
                <elementReference>varEnrollmentCaseId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Last_Opportunity__c</field>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Service_Agreement__c</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Service_Products_to_Update</name>
        <label>Update Service Products to Update</label>
        <locationX>4802</locationX>
        <locationY>2279</locationY>
        <connector>
            <targetReference>Get_Flow_Configuration_Settings</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Fault_Path6</targetReference>
        </faultConnector>
        <inputReference>varServiceProductsToUpdateCollection</inputReference>
    </recordUpdates>
    <start>
        <locationX>2960</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_Account_Information</targetReference>
        </connector>
        <filterLogic>1 AND (2 OR 3 OR 4)</filterLogic>
        <filters>
            <field>Maintain_Agreements__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Closed Won</stringValue>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Closed Lost</stringValue>
            </value>
        </filters>
        <filters>
            <field>StageName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Closed-Completed</stringValue>
            </value>
        </filters>
        <object>Opportunity</object>
        <recordTriggerType>Update</recordTriggerType>
        <triggerType>RecordAfterSave</triggerType>
    </start>
    <status>Active</status>
    <subflows>
        <name>Create_No_Workflow_Accounting_Case</name>
        <label>Create No Workflow Accounting Case</label>
        <locationX>3482</locationX>
        <locationY>3035</locationY>
        <connector>
            <targetReference>Update_Opportunity_Processed</targetReference>
        </connector>
        <flowName>create_Billing_Case_Accounting</flowName>
        <inputAssignments>
            <name>billingCaseAccountIDOverride</name>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>billingCaseOrigin</name>
            <value>
                <stringValue>Internal Alert</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>billingCaseOwnerIDOverride</name>
            <value>
                <elementReference>Get_Flow_Configuration_Settings.Billing_OwnerId__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>billingCaseServiceAgreementIDOverride</name>
            <value>
                <elementReference>$Record.Service_Agreement_ID__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>billingCaseSubject</name>
            <value>
                <elementReference>$Record.Accounting_Case_Manual_Create__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>billingCaseType</name>
            <value>
                <stringValue>Internal Alert</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>relatedCaseId</name>
        </inputAssignments>
        <inputAssignments>
            <name>relatedOppIDOverride</name>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </inputAssignments>
    </subflows>
    <subflows>
        <name>Fault_Path</name>
        <label>Fault Path</label>
        <locationX>6914</locationX>
        <locationY>971</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Update_Maintain_Agreements_field</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path1</name>
        <label>Fault Path1</label>
        <locationX>3834</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Create_Service_Agreement</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path14</name>
        <label>Fault Path14</label>
        <locationX>6650</locationX>
        <locationY>3443</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Update_Opportunity_Processed</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path15</name>
        <label>Fault Path15</label>
        <locationX>314</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Send_Notification</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path16</name>
        <label>Fault Path16</label>
        <locationX>842</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Send_Notification_0</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path17</name>
        <label>Fault Path17</label>
        <locationX>1370</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Send_Notification_0_0</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path18</name>
        <label>Fault Path18</label>
        <locationX>1898</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Send_Notification_0_0_0</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path19</name>
        <label>Fault Path19</label>
        <locationX>2426</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Send_Notification_0_0_0_0</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path2</name>
        <label>Fault Path2</label>
        <locationX>3570</locationX>
        <locationY>1295</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Create_Bill_To_Billing_Agreement</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path20</name>
        <label>Fault Path20</label>
        <locationX>5858</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <elementReference>Send_Notification_0_0_0_0_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path21</name>
        <label>Fault Path21</label>
        <locationX>6386</locationX>
        <locationY>1187</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <elementReference>Send_Notification_0_0_0_0_0_0</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path3</name>
        <label>Fault Path3</label>
        <locationX>3306</locationX>
        <locationY>1811</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Create_New_Service_Agreement_Products</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path4</name>
        <label>Fault Path4</label>
        <locationX>3042</locationX>
        <locationY>1919</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Update_Opportunity_With_Service_Agreement</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path5</name>
        <label>Fault Path5</label>
        <locationX>5330</locationX>
        <locationY>2279</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Create_Service_Agreement_Products</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <subflows>
        <name>Fault_Path6</name>
        <label>Fault Path6</label>
        <locationX>5066</locationX>
        <locationY>2387</locationY>
        <flowName>Fault_Path_Flow</flowName>
        <inputAssignments>
            <name>varElementName</name>
            <value>
                <stringValue>Update_Service_Products_to_Update</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFaultMessage</name>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <name>varFlowname</name>
            <value>
                <stringValue>Maintain Agreement</stringValue>
            </value>
        </inputAssignments>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </subflows>
    <variables>
        <name>varAddendumAlert</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>varBillingAgreementId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>Used to control the subject for the accounting case being created based on the workflow agreement value for the opportunity</description>
        <name>varBillingCaseSubject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue>Create NS Order</stringValue>
        </value>
    </variables>
    <variables>
        <name>varCase01</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>varCase02</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>varCurrentUsers</name>
        <dataType>String</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varEnrollmentCaseId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varServiceAgreementId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>varServiceAgreementProduct</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Service_Agreement_Products__c</objectType>
    </variables>
    <variables>
        <name>varServiceAgreementProductCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Service_Agreement_Products__c</objectType>
    </variables>
    <variables>
        <name>varServiceProductsToUpdateCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Service_Agreement_Products__c</objectType>
    </variables>
    <variables>
        <name>varServiceProductsToUpdateObject</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Service_Agreement_Products__c</objectType>
    </variables>
</Flow>
